import "./chunk-G3PMV62Z.js";

// node_modules/@nuxt/hints/dist/runtime/hydration/component.js
import { defineNuxtComponent as _defineNuxtComponent, defineComponent as _defineComponent } from "#imports";

// node_modules/@nuxt/hints/dist/runtime/hydration/composables.js
import { getCurrentInstance, onMounted } from "vue";
import { useNuxtApp } from "#imports";

// node_modules/@nuxt/hints/dist/runtime/hydration/utils.js
var HYDRATION_ROUTE = "/__nuxt_hydration";
function formatHTML(html) {
  if (!html) return "";
  let formatted = "";
  let indent = 0;
  const tags = html.split(/(<\/?[^>]+>)/g);
  for (const tag of tags) {
    if (!tag.trim()) continue;
    if (tag.startsWith("</")) {
      indent--;
      formatted += "\n" + "  ".repeat(Math.max(0, indent)) + tag;
    } else if (tag.startsWith("<") && !tag.endsWith("/>") && !tag.includes("<!")) {
      formatted += "\n" + "  ".repeat(Math.max(0, indent)) + tag;
      indent++;
    } else if (tag.startsWith("<")) {
      formatted += "\n" + "  ".repeat(Math.max(0, indent)) + tag;
    } else {
      formatted += "\n" + "  ".repeat(Math.max(0, indent)) + tag.trim();
    }
  }
  return formatted.trim();
}

// node_modules/@nuxt/hints/dist/runtime/hydration/composables.js
function useHydrationCheck() {
  if (import.meta.server) return;
  const nuxtApp = useNuxtApp();
  if (!nuxtApp.isHydrating) {
    return;
  }
  const instance = getCurrentInstance();
  if (!instance) return;
  const htmlPreHydration = formatHTML(instance.vnode.el?.outerHTML);
  const vnodePrehydration = instance.vnode;
  onMounted(() => {
    const htmlPostHydration = formatHTML(instance.vnode.el?.outerHTML);
    if (htmlPreHydration !== htmlPostHydration) {
      const payload = {
        htmlPreHydration,
        htmlPostHydration,
        id: globalThis.crypto.randomUUID(),
        componentName: instance.type.name ?? instance.type.displayName ?? instance.type.__name,
        fileLocation: instance.type.__file ?? "unknown"
      };
      nuxtApp.__hints.hydration.push({
        ...payload,
        instance,
        vnode: vnodePrehydration
      });
      $fetch(new URL(HYDRATION_ROUTE, window.location.origin).href, {
        method: "POST",
        body: payload
      });
      console.warn(`[nuxt/hints:hydration] Component ${instance.type.name ?? instance.type.displayName ?? instance.type.__name ?? instance.type.__file} seems to have different html pre and post-hydration. Please make sure you don't have any hydration issue.`);
    }
  });
}

// node_modules/@nuxt/hints/dist/runtime/hydration/component.js
var defineNuxtComponent = function defineNuxtComponent2(...args) {
  const [options, key] = args;
  const { setup } = options;
  options.setup = function(props, ctx) {
    useHydrationCheck();
    return setup ? setup(props, ctx) : void 0;
  };
  return _defineNuxtComponent(options, key);
};
var defineComponent = function defineComponent2(...args) {
  const [options] = args;
  if (typeof options === "object" && options !== null) {
    const { setup } = options;
    options.setup = function(props, ctx) {
      useHydrationCheck();
      return setup ? setup(props, ctx) : void 0;
    };
  }
  return _defineComponent(options);
};
export {
  defineComponent,
  defineNuxtComponent
};
//# sourceMappingURL=@nuxt_hints_runtime_hydration_component.js.map
